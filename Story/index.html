<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aeneid Story Node | OneNov</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
 <style>
    /* ===== Blockchain Theme Variables ===== */
    :root {
      --black: #0A0B0D;
      --dark: #121318;
      --darker: #1A1B23;
      --primary: #FFD700;
      --primary-glow: rgba(255, 215, 0, 0.15);
      --secondary: #FFA500;
      --accent: #00F0FF;
      --text: #E0E4F0;
      --text-muted: #A0A8C0;
      --success: #00FF88;
      --warning: #FFAA00;
      --error: #FF4D4D;
      --node-glow: 0 0 15px var(--primary-glow);
      --transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }

    /* ===== Base Styles ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Space Grotesk', sans-serif;
      background-color: var(--black);
      color: var(--text);
      line-height: 1.7;
      overflow-x: hidden;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.05) 0%, transparent 25%),
        radial-gradient(circle at 80% 70%, rgba(255, 165, 0, 0.05) 0%, transparent 25%);
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        linear-gradient(135deg, var(--black) 0%, var(--dark) 100%);
      z-index: -2;
      opacity: 0.98;
    }

    /* ===== Blockchain Node Animation ===== */
    .blockchain-nodes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .node {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--primary);
      box-shadow: var(--node-glow);
      opacity: 0.6;
    }

    .connection {
      position: absolute;
      height: 2px;
      background: linear-gradient(90deg, var(--primary), transparent);
      transform-origin: left center;
    }

    /* ===== Main Container ===== */
    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 20px;
      position: relative;
      z-index: 2;
    }

    /* ===== Header ===== */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 25px 0;
      background: rgba(10, 11, 13, 0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255, 215, 0, 0.1);
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--primary);
      box-shadow: 0 0 20px var(--primary-glow);
      transition: var(--transition);
    }

    .logo-img:hover {
      transform: rotate(15deg) scale(1.1);
    }

    .logo-text {
      font-size: 1.8rem;
      font-weight: 700;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .theme-toggle {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 215, 0, 0.1);
      color: var(--primary);
      border: 1px solid rgba(255, 215, 0, 0.3);
      cursor: pointer;
      transition: var(--transition);
    }

    .theme-toggle:hover {
      background: var(--primary);
      color: var(--black);
      transform: translateY(-3px);
      box-shadow: 0 0 20px var(--primary-glow);
    }

    /* ===== Hero Section ===== */
    .hero {
      padding: 100px 0 60px;
      text-align: center;
      position: relative;
    }

    .chain-badge {
      display: inline-block;
      padding: 10px 25px;
      border-radius: 50px;
      font-size: 0.9rem;
      font-weight: 600;
      letter-spacing: 1px;
      margin-bottom: 30px;
      background: rgba(255, 215, 0, 0.15);
      color: var(--primary);
      border: 1px solid rgba(255, 215, 0, 0.3);
      backdrop-filter: blur(5px);
      text-transform: uppercase;
    }

    .hero-title {
      font-size: 3.5rem;
      font-weight: 700;
      line-height: 1.15;
      margin-bottom: 1.5rem;
      background: linear-gradient(to right, var(--text), var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero-subtitle {
      font-size: 1.4rem;
      margin-bottom: 2.5rem;
      color: var(--text-muted);
      max-width: 750px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.6;
    }

    .chain-logo {
      width: 150px;
      height: 150px;
      margin: 40px auto;
      border-radius: 50%;
      object-fit: contain;
      border: 3px solid rgba(255, 215, 0, 0.3);
      box-shadow: 0 0 50px rgba(255, 215, 0, 0.2);
      padding: 20px;
      background: rgba(10, 11, 13, 0.7);
      backdrop-filter: blur(5px);
      transition: var(--transition);
    }

    .chain-logo:hover {
      transform: scale(1.05) rotate(5deg);
      box-shadow: 0 0 70px rgba(255, 215, 0, 0.3);
    }

    /* ===== Content Sections ===== */
    .section {
      background: rgba(18, 19, 24, 0.7);
      border-radius: 20px;
      padding: 40px;
      margin-bottom: 40px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 215, 0, 0.1);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .section:hover {
      border-color: var(--primary);
      box-shadow: 0 15px 50px rgba(255, 215, 0, 0.2);
      transform: translateY(-5px);
    }

    .section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.03) 0%, transparent 100%);
      z-index: -1;
    }

    .section-title {
      font-size: 2rem;
      margin-bottom: 1.5rem;
      color: var(--primary);
      position: relative;
      display: inline-block;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 60px;
      height: 3px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      border-radius: 3px;
    }

    /* ===== Requirements Table ===== */
    .requirements {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    .requirements th {
      background: rgba(255, 215, 0, 0.1);
      color: var(--primary);
      text-align: left;
      padding: 15px;
      font-weight: 600;
      border-bottom: 2px solid var(--primary);
    }

    .requirements td {
      padding: 15px;
      border-bottom: 1px solid rgba(255, 215, 0, 0.1);
    }

    .requirements tr:last-child td {
      border-bottom: none;
    }

    .requirements tr:hover {
      background: rgba(255, 215, 0, 0.05);
    }

    /* ===== Code Blocks ===== */
    .code-container {
      position: relative;
      margin: 25px 0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    pre {
      background: var(--darker);
      padding: 20px;
      overflow-x: auto;
      font-family: 'Space Mono', monospace;
      font-size: 0.95rem;
      line-height: 1.6;
      color: var(--text);
      margin: 0;
      position: relative;
    }

    pre::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: linear-gradient(to bottom, var(--primary), var(--secondary));
    }

    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255, 215, 0, 0.2) !important;
      color: var(--primary) !important;
      border: 1px solid var(--primary) !important;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: var(--transition);
      backdrop-filter: blur(5px);
      z-index: 10;
      font-weight: bold;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
    }

    .copy-btn:hover {
      background: var(--primary) !important;
      color: var(--black) !important;
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 0 15px var(--primary-glow);
    }

    .copy-btn i {
      margin-right: 5px;
    }

    /* ===== Command Groups ===== */
    .command-group {
      margin-bottom: 30px;
    }

    .command-title {
      font-size: 1.3rem;
      margin-bottom: 15px;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .command-title i {
      color: var(--primary);
    }

    /* ===== Status Indicators ===== */
    .status {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 15px;
      border-radius: 50px;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 20px;
    }

    .status-online {
      background: rgba(0, 255, 136, 0.1);
      color: var(--success);
      border: 1px solid rgba(0, 255, 136, 0.3);
    }

    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--success);
      box-shadow: 0 0 10px var(--success);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(0, 255, 136, 0); }
      100% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0); }
    }

    /* ===== Navigation ===== */
    .nav-links {
      display: flex;
      gap: 15px;
      margin: 30px 0;
      flex-wrap: wrap;
      justify-content: center;
    }

    .nav-link {
      padding: 12px 25px;
      border-radius: 8px;
      background: rgba(255, 215, 0, 0.1);
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
      transition: var(--transition);
      border: 1px solid rgba(255, 215, 0, 0.3);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-link:hover {
      background: rgba(255, 215, 0, 0.2);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2);
    }

    /* ===== Footer ===== */
    footer {
      text-align: center;
      padding: 60px 0 30px;
      margin-top: 60px;
      border-top: 1px solid rgba(255, 215, 0, 0.1);
    }

    .social-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    .social-link {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 215, 0, 0.1);
      color: var(--primary);
      font-size: 1.3rem;
      transition: var(--transition);
      border: 1px solid rgba(255, 215, 0, 0.3);
    }

    .social-link:hover {
      background: var(--primary);
      color: var(--black);
      transform: translateY(-5px);
      box-shadow: 0 0 20px var(--primary-glow);
    }

    .copyright {
      margin-top: 30px;
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* ===== Tab System ===== */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tab-btn {
      padding: 12px 25px;
      border-radius: 8px;
      background: rgba(255, 215, 0, 0.1);
      color: var(--primary);
      border: 1px solid rgba(255, 215, 0, 0.3);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .tab-btn:hover {
      background: rgba(255, 215, 0, 0.2);
    }

    .tab-btn.active {
      background: var(--primary);
      color: var(--black);
      box-shadow: 0 0 15px var(--primary-glow);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* ===== Responsive Design ===== */
    @media (max-width: 992px) {
      .hero-title {
        font-size: 2.8rem;
      }
      
      .hero-subtitle {
        font-size: 1.2rem;
      }
      
      .section {
        padding: 30px;
      }
    }

    @media (max-width: 768px) {
      .hero-title {
        font-size: 2.2rem;
      }
      
      .section-title {
        font-size: 1.7rem;
      }
      
      .chain-logo {
        width: 120px;
        height: 120px;
      }
      
      .nav-links {
        flex-direction: column;
        align-items: center;
      }
      
      .nav-link {
        width: 100%;
        justify-content: center;
      }

      .tabs {
        flex-direction: column;
      }

      .tab-btn {
        width: 100%;
        text-align: center;
      }
    }

    @media (max-width: 576px) {
      .hero {
        padding: 80px 0 40px;
      }
      
      .hero-title {
        font-size: 1.8rem;
      }
      
      .section {
        padding: 25px 20px;
      }
      
      .requirements th, 
      .requirements td {
        padding: 12px 10px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <!-- Blockchain Node Animation Background -->
  <div class="blockchain-nodes" id="blockchainNodes"></div>

  <!-- Header -->
  <header>
    <div class="container header-content">
      <a href="index.html" class="logo">
        <img src="https://i.ibb.co.com/ch0T19ps/Picsart-25-03-22-00-26-38-360.png" alt="OneNov Logo" class="logo-img">
        <span class="logo-text">OneNov</span>
      </a>
      <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
      </button>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <span class="chain-badge">AENEID VALIDATOR</span>
      <h1 class="hero-title">Aeneid Story Node Setup</h1>
      <p class="hero-subtitle">Complete guide to deploying and managing a high-performance Story Protocol validator node on the Aeneid testnet</p>
      
      <div class="status status-online">
        <span class="status-dot"></span>
        <span>NETWORK STATUS: ACTIVE</span>
      </div>
      
      <img src="https://pbs.twimg.com/profile_images/1820303986349805569/MKfPfLtz_400x400.jpg" alt="Story Logo" class="chain-logo">
      
      <div class="nav-links">
        <a href="index.html" class="nav-link">
          <i class="fas fa-arrow-left"></i> All Validators
        </a>
        <a href="https://aeneid.storyscan.app/validators/storyvaloper1n3gfyr6cqpvpprzfx0ycu6etvg80wqrsec5rdk" class="nav-link" target="_blank">
          <i class="fas fa-external-link-alt"></i> Explorer
        </a>
        <a href="https://docs.story.foundation/network/network-info/aeneid" class="nav-link" target="_blank">
          <i class="fas fa-book"></i> Official Docs
        </a>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="container">
    <!-- Tab Navigation -->
    <section class="section" style="padding: 20px;">
      <div class="tabs">
        <button class="tab-btn active" onclick="openTab('installation')">Installation</button>
        <button class="tab-btn" onclick="openTab('upgrade')">Upgrade</button>
        <button class="tab-btn" onclick="openTab('snapshot')">Sync/Snapshot</button>
        <button class="tab-btn" onclick="openTab('api')">Public API/RPC</button>
        <button class="tab-btn" onclick="openTab('cheatsheet')">CLI Cheatsheet</button>
        <button class="tab-btn" onclick="openTab('links')">Official Links</button>
      </div>
    </section>

    <!-- Installation Tab -->
    <div id="installation" class="tab-content active">
      <!-- Requirements Section -->
      <section class="section">
        <h2 class="section-title">System Requirements</h2>
        <table class="requirements">
          <thead>
            <tr>
              <th>Component</th>
              <th>Minimum</th>
              <th>Recommended</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>OS</strong></td>
              <td>Ubuntu 20.04</td>
              <td>Ubuntu 22.04 LTS</td>
            </tr>
            <tr>
              <td><strong>CPU</strong></td>
              <td>4 Cores</td>
              <td>8+ Cores</td>
            </tr>
            <tr>
              <td><strong>RAM</strong></td>
              <td>8GB</td>
              <td>16GB+</td>
            </tr>
            <tr>
              <td><strong>Storage</strong></td>
              <td>500GB SSD/NVMe</td>
              <td>1TB SSD/NVMe</td>
            </tr>
            <tr>
              <td><strong>Network</strong></td>
              <td>10Mbps</td>
              <td>100Mbps+</td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Manual Installation -->
      <section class="section">
        <h2 class="section-title">Manual Installation</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-cog"></i> Step 1: Install Dependencies</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>sudo apt update && sudo apt upgrade -y
sudo apt install curl git wget htop tmux build-essential jq make lz4 gcc unzip -y</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-download"></i> Step 2: Install Go</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>cd $HOME
VER="1.22.5"
wget "https://golang.org/dl/go$VER.linux-amd64.tar.gz"
sudo rm -rf /usr/local/go
sudo tar -C /usr/local -xzf "go$VER.linux-amd64.tar.gz"
rm "go$VER.linux-amd64.tar.gz"
[ ! -f ~/.bash_profile ] && touch ~/.bash_profile
echo "export PATH=$PATH:/usr/local/go/bin:~/go/bin" >> ~/.bash_profile
source $HOME/.bash_profile
[ ! -d ~/go/bin ] && mkdir -p ~/go/bin</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-server"></i> Step 3: Set Environment Variables</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>echo "export MONIKER=\"Your_Node_Name\"" >> $HOME/.bash_profile
echo "export STORY_CHAIN_ID=\"aeneid\"" >> $HOME/.bash_profile
echo "export STORY_PORT=\"56\"" >> $HOME/.bash_profile
source $HOME/.bash_profile</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-server"></i> Step 4: Install Story Node</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>cd $HOME
rm -rf story-geth
git clone https://github.com/piplabs/story-geth.git
cd story-geth
git checkout v1.0.2
make geth
mv build/bin/geth $HOME/go/bin/
[ ! -d "$HOME/.story/story" ] && mkdir -p "$HOME/.story/story"
[ ! -d "$HOME/.story/geth" ] && mkdir -p "$HOME/.story/geth"

cd $HOME
rm -rf story
git clone https://github.com/piplabs/story
cd story
git checkout v1.3.0
go build -o story ./client 
mkdir -p $HOME/go/bin/
mv $HOME/story/story $HOME/go/bin/

story init --moniker $MONIKER --network $STORY_CHAIN_ID</code></pre>
          </div>
        </div>
      </section>

      <!-- Configuration Section -->
      <section class="section">
        <h2 class="section-title">Node Configuration</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-cogs"></i> Configure Peers and Ports</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>SEEDS="46b7995b0b77515380000b7601e6fc21f783e16f@story-testnet-seed.itrocket.net:52656"
PEERS="01f8a2148a94f0267af919d2eab78452c90d9864@story-testnet-peer.itrocket.net:52656,b66b0df0720b38f9405f8a5c50511365ec621b2a@135.181.181.59:62656,9308260b6cb4ca1faa9f3025bac0bc2636c4b020@185.232.68.94:26656,db6791a8e35dee076de75aebae3c89df8bba3374@65.109.50.22:56656,a8d01e154197d799637eca4f0f369dc215db6b70@144.76.111.9:26656,311cd3903e25ab85e5a26c44510fbc747ab61760@152.53.87.97:36656,9d34ab3819aa8baa75589f99138318acfa0045f5@95.217.119.251:30900,5eb1d392045c1159a94bdb49916341ac4a787500@157.180.93.155:52656,34c910cde040e983f076195175ed2fe7d447b486@152.53.102.226:26656,dfb96be7e47cd76762c1dd45a5f76e536be47faa@65.108.45.34:32655,381b10bd04853b375f9a1d42983a0fbfa753e4aa@37.59.22.162:26656"
sed -i -e "/^\[p2p\]/,/^\[/{s/^[[:space:]]*seeds *=.*/seeds = \"$SEEDS\"/}" \
       -e "/^\[p2p\]/,/^\[/{s/^[[:space:]]*persistent_peers *=.*/persistent_peers = \"$PEERS\"/}" $HOME/.story/story/config/config.toml

# Set custom ports
sed -i.bak -e "s%:1317%:${STORY_PORT}317%g;
s%:8551%:${STORY_PORT}551%g" $HOME/.story/story/config/story.toml

sed -i.bak -e "s%:26658%:${STORY_PORT}658%g;
s%:26657%:${STORY_PORT}657%g;
s%:26656%:${STORY_PORT}656%g;
s%^external_address = \"\"%external_address = \"$(wget -qO- eth0.me):${STORY_PORT}656\"%;
s%:26660%:${STORY_PORT}660%g" $HOME/.story/story/config/config.toml

# Enable prometheus and disable indexing
sed -i -e "s/prometheus = false/prometheus = true/" $HOME/.story/story/config/config.toml
sed -i -e "s/^indexer *=.*/indexer = \"null\"/" $HOME/.story/story/config/config.toml</code></pre>
          </div>
        </div>
        
        <div class="command-group">
  <h3 class="command-title"><i class="fas fa-server"></i> Create Service Files</h3>
  <div class="code-container">
    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
    <pre><code class="language-bash"># Create geth service file
sudo tee /etc/systemd/system/story-geth.service > /dev/null <<EOF
[Unit]
Description=Story Geth daemon
After=network-online.target

[Service]
User=$USER
ExecStart=$HOME/go/bin/geth --aeneid --syncmode full --http --http.api eth,net,web3,engine --http.vhosts '*' --http.addr 0.0.0.0 --http.port ${STORY_PORT}545 --authrpc.port ${STORY_PORT}551 --ws --ws.api eth,web3,net,txpool --ws.addr 0.0.0.0 --ws.port ${STORY_PORT}546
Restart=on-failure
RestartSec=3
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
EOF</code></pre>
  </div>
</div>
      </section>

      <!-- Snapshot Section -->
      <section class="section">
        <h2 class="section-title">Sync from Snapshot</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-download"></i> Download and Install Snapshot</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code># Backup priv_validator_state.json
cp $HOME/.story/story/data/priv_validator_state.json $HOME/.story/story/priv_validator_state.json.backup

# Remove old data and unpack Story snapshot
rm -rf $HOME/.story/story/data
curl https://server-3.itrocket.net/testnet/story/story_2025-06-27_6011823_snap.tar.lz4 | lz4 -dc - | tar -xf - -C $HOME/.story/story

# Restore priv_validator_state.json
mv $HOME/.story/story/priv_validator_state.json.backup $HOME/.story/story/data/priv_validator_state.json

# Delete geth data and unpack Geth snapshot
rm -rf $HOME/.story/geth/aeneid/geth/chaindata
mkdir -p $HOME/.story/geth/aeneid/geth
curl https://server-3.itrocket.net/testnet/story/geth_story_2025-06-27_6011823_snap.tar.lz4 | lz4 -dc - | tar -xf - -C $HOME/.story/geth/aeneid/geth</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-play"></i> Start Services</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>sudo systemctl daemon-reload
sudo systemctl enable story story-geth
sudo systemctl restart story-geth && sleep 5 && sudo systemctl restart story</code></pre>
          </div>
        </div>
      </section>

      <!-- Common Commands -->
      <section class="section">
        <h2 class="section-title">Essential Commands</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-sync-alt"></i> Check Sync Status</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>journalctl -u story -u story-geth -f -o cat</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-terminal"></i> Check Node Info</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>curl localhost:$(sed -n '/\[rpc\]/,/laddr/ { /laddr/ {s/.*://; s/".*//; p} }' $HOME/.story/story/config/config.toml)/status | jq</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-network-wired"></i> Check Peer Info</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>echo "$(curl localhost:$(sed -n '/\[rpc\]/,/laddr/ { /laddr/ {s/.*://; s/".*//; p} }' $HOME/.story/story/config/config.toml)/status | jq -r '.result.node_info.id')@$(wget -qO- eth0.me):$(sed -n '/Address to listen for incoming connection/{n;p;}' $HOME/.story/story/config/config.toml | sed 's/.*://; s/".*//')"</code></pre>
          </div>
        </div>
      </section>
    </div>

    <!-- Upgrade Tab -->
    <div id="upgrade" class="tab-content">
      <section class="section">
        <h2 class="section-title">Upgrade Binary</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-download"></i> Upgrade Story Node</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>cd $HOME
rm -rf story
git clone https://github.com/piplabs/story
cd story
git checkout v1.3.0
go build -o story ./client 
sudo systemctl stop story-geth
wget -O $(which geth) https://github.com/piplabs/story-geth/releases/download/v1.1.0/geth-linux-amd64
chmod +x $(which geth)
sudo systemctl start story-geth
sudo mv $HOME/story/story $(which story)
sudo systemctl restart story && sudo journalctl -u story -f</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-check-circle"></i> Verify Version</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>story version</code></pre>
          </div>
          <p style="margin-top: 10px; color: var(--text-muted);">Should return: v1.3.0</p>
        </div>
      </section>
    </div>

    <!-- Snapshot Tab -->
    <div id="snapshot" class="tab-content">
      <section class="section">
        <h2 class="section-title">Sync/Snapshot</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-download"></i> Sync Using Snapshot</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code># Install dependencies and disable statesync
sudo apt install curl tmux jq lz4 unzip -y
sed -i.bak -E "s|^(enable[[:space:]]+=[[:space:]]+).*$|\1false|" $HOME/.story/story/config/config.toml

# Stop node and backup priv_validator_state.json
sudo systemctl stop story story-geth
cp $HOME/.story/story/data/priv_validator_state.json $HOME/.story/story/priv_validator_state.json.backup

# Remove old data and unpack Story snapshot
rm -rf $HOME/.story/story/data
curl https://server-3.itrocket.net/testnet/story/story_2025-06-27_6011823_snap.tar.lz4 | lz4 -dc - | tar -xf - -C $HOME/.story/story

# Restore priv_validator_state.json
mv $HOME/.story/story/priv_validator_state.json.backup $HOME/.story/story/data/priv_validator_state.json

# Delete geth data and unpack Geth snapshot
rm -rf $HOME/.story/geth/aeneid/geth/chaindata
curl https://server-3.itrocket.net/testnet/story/geth_story_2025-06-27_6011823_snap.tar.lz4 | lz4 -dc - | tar -xf - -C $HOME/.story/geth/aeneid/geth

# Restart node and check logs
sudo systemctl restart story story-geth
sudo journalctl -u story-geth -u story -f</code></pre>
          </div>
        </div>
      </section>
    </div>

    <!-- API/RPC Tab -->
    <div id="api" class="tab-content">
      <section class="section">
        <h2 class="section-title">Public API/RPC Endpoints</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-link"></i> Public RPC Endpoints</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>https://aeneid.storyrpc.io
https://rpc.ankr.com/story_aeneid_testnet
https://www.quicknode.com/chains/story
https://story-aeneid.g.alchemy.com/v2/${ALCHEMY_API_KEY}
https://tenderly.co/</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-link"></i> Local RPC</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>http://localhost:5657</code></pre>
          </div>
        </div>
      </section>
    </div>

    <!-- CLI Cheatsheet Tab -->
    <div id="cheatsheet" class="tab-content">
      <section class="section">
        <h2 class="section-title">CLI Cheatsheet</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-terminal"></i> Service Operations</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code># Check logs
sudo journalctl -u story -f

# Start service
sudo systemctl start story

# Stop service
sudo systemctl stop story

# Restart service
sudo systemctl restart story

# Check service status
sudo systemctl status story

# Reload services
sudo systemctl daemon-reload

# Enable Service
sudo systemctl enable story

# Disable Service
sudo systemctl disable story</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-network-wired"></i> Node Information</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code># Node info
curl localhost:$(sed -n '/\[rpc\]/,/laddr/ { /laddr/ {s/.*://; s/".*//; p} }' $HOME/.story/story/config/config.toml)/status | jq

# Your node peer
echo "$(curl localhost:$(sed -n '/\[rpc\]/,/laddr/ { /laddr/ {s/.*://; s/".*//; p} }' $HOME/.story/story/config/config.toml)/status | jq -r '.result.node_info.id')@$(wget -qO- eth0.me):$(sed -n '/Address to listen for incoming connection/{n;p;}' $HOME/.story/story/config/config.toml | sed 's/.*://; s/".*//')"

# Your enode
geth --exec "admin.nodeInfo.enode" attach ~/.story/geth/aeneid/geth.ipc</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-vote-yea"></i> Staking Operations</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code># Delegate to yourself
story validator stake --chain-id 1315 --validator-pubkey $(story validator export | grep "Compressed Public Key (hex)" | awk '{print $NF}') --stake 1000000000000000000 --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2}')

# Delegate
story validator stake --chain-id 1315 --validator-pubkey <VALIDATOR_PUB_KEY_IN_HEX> --stake 1000000000000000000 --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2}')

# Delegate on behalf of other delegator
story validator stake-on-behalf --chain-id 1315 --validator-pubkey <VALIDATOR_PUB_KEY_IN_HEX> --delegator-pubkey <DELEGATOR_PUB_KEY_IN_HEX> --stake 1000000000000000000 --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2}')

# Add operator
story validator add-operator --chain-id 1315 --operator <OPERATOR_EVM_ADDRESS> --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2})

# Unstake from yourself
story validator unstake --chain-id 1315 --validator-pubkey $(story validator export | grep "Compressed Public Key (hex)" | awk '{print $NF}') --unstake 1000000000000000000 --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2})

# Unstake
story validator unstake --chain-id 1315 --validator-pubkey <VALIDATOR_PUB_KEY_IN_HEX> --unstake 1000000000000000000 --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2})

# Unstake on behalf of other delegator
story validator unstake-on-behalf --chain-id 1315 --validator-pubkey <VALIDATOR_PUB_KEY_IN_HEX> --delegator-pubkey <DELEGATOR_PUB_KEY_IN_HEX> --unstake 1000000000000000000 --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2})

# Remove operator
story validator remove-operator --operator <OPERATOR_EVM_ADDRESS> --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2})

# Set or change withdrawal address
story validator set-withdrawal-address --withdrawal-address <YOUR_EVM_ADDRESS> --private-key $(cat $HOME/.story/story/config/private_key.txt | grep "PRIVATE_KEY" | awk -F'=' '{print $2})</code></pre>
          </div>
        </div>
      </section>
    </div>

    <!-- Official Links Tab -->
    <div id="links" class="tab-content">
      <section class="section">
        <h2 class="section-title">Official Links</h2>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-globe"></i> Main Links</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>Main Website: https://www.story.foundation/
Docs: https://docs.story.foundation/docs/what-is-story
Main Twitter: https://twitter.com/StoryProtocol 
Ecosystem Twitter: https://x.com/StoryEcosystem 
Engineer Twitter: https://x.com/StoryEngs 
Telegram: https://telegram.me/storyannouncements 
YouTube: https://youtube.com/@storyFDN 
Discord: https://discord.gg/storyprotocol 
Github: https://github.com/storyprotocol</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-graduation-cap"></i> Program Links</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>Story Academy: https://www.story.foundation/academy
Ambassador Program: https://storyprotocol.notion.site/Story-s-Ambassador-Program-123051299a5480b48c08eb7ac7662e8d</code></pre>
          </div>
        </div>
        
        <div class="command-group">
          <h3 class="command-title"><i class="fas fa-link"></i> Other Links</h3>
          <div class="code-container">
            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
            <pre><code>Get in Touch Form: https://share-na2.hsforms.com/2HI1vPE3PQLqmhc0o7f_WLA409z7u 
Follow More of the Story Team: https://x.com/StoryProtocol/affiliates 
Linktree: https://linktr.ee/storyprotocol</code></pre>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>Need help with your validator setup?</p>
      <div class="social-links">
        <a href="https://t.me/OneNov02" target="_blank" title="Telegram Support">
          <i class="fab fa-telegram"></i>
        </a>
        <a href="https://github.com/OneNov0209" target="_blank" title="GitHub">
          <i class="fab fa-github"></i>
        </a>
        <a href="https://x.com/Surya021292" target="_blank" title="Twitter">
          <i class="fab fa-twitter"></i>
        </a>
        <a href="https://discord.gg/your-invite" target="_blank" title="Discord">
          <i class="fab fa-discord"></i>
        </a>
      </div>
      <p class="copyright">Â© 2023 OneNov | Enterprise Blockchain Validators</p>
    </div>
  </footer>

  <script>
  // Blockchain Node Animation - Optimized
  function createBlockchainNodes() {
    const container = document.getElementById('blockchainNodes');
    if (!container) return;
    
    const width = window.innerWidth;
    const height = window.innerHeight;
    const nodeCount = Math.floor(Math.min(width, height) / 50); // Dynamic node count
    
    // Clear existing nodes
    container.innerHTML = '';
    
    const nodes = [];
    const connections = [];
    
    // Create nodes with better distribution
    for (let i = 0; i < nodeCount; i++) {
      const node = document.createElement('div');
      node.classList.add('node');
      
      // Better distribution algorithm
      const posX = 50 + (i % 5) * (width - 100) / 5 + Math.random() * 50;
      const posY = 50 + Math.floor(i / 5) * (height - 100) / Math.ceil(nodeCount/5) + Math.random() * 50;
      
      node.style.left = `${posX}px`;
      node.style.top = `${posY}px`;
      
      // Random animation with smoother parameters
      const duration = 8 + Math.random() * 8;
      const delay = Math.random() * 3;
      node.style.animation = `float ${duration}s ease-in-out ${delay}s infinite alternate`;
      
      container.appendChild(node);
      nodes.push({ x: posX, y: posY, element: node });
    }
    
    // Create connections with performance optimization
    const maxDistance = Math.min(width, height) * 0.35;
    for (let i = 0; i < nodes.length; i++) {
      for (let j = i + 1; j < nodes.length; j++) {
        const dx = nodes[j].x - nodes[i].x;
        const dy = nodes[j].y - nodes[i].y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance < maxDistance) {
          const connection = document.createElement('div');
          connection.classList.add('connection');
          
          connection.style.left = `${nodes[i].x}px`;
          connection.style.top = `${nodes[i].y}px`;
          connection.style.width = `${distance}px`;
          
          const angle = Math.atan2(dy, dx) * 180 / Math.PI;
          connection.style.transform = `rotate(${angle}deg)`;
          
          // Smoother connection animation
          const animDuration = 10 + Math.random() * 10;
          connection.style.animation = `pulse ${animDuration}s ease-in-out ${Math.random() * 5}s infinite`;
          
          container.appendChild(connection);
          connections.push(connection);
        }
      }
    }
  }

  // Theme Toggle - Enhanced
  const themeToggle = document.getElementById('themeToggle');
  if (themeToggle) {
    themeToggle.addEventListener('click', () => {
      const isLight = document.body.classList.toggle('light-mode');
      
      // Smooth transition
      document.body.style.transition = 'background-color 0.5s ease';
      
      if (isLight) {
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        localStorage.setItem('theme', 'light');
      } else {
        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        localStorage.setItem('theme', 'dark');
      }
      
      setTimeout(() => {
        document.body.style.transition = '';
      }, 500);
    });

    // Check for saved theme preference
    if (localStorage.getItem('theme') === 'light') {
      document.body.classList.add('light-mode');
      themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
    }
  }

  // Robust Copy Function with Fallback
  async function copyToClipboard(button) {
    if (!button) return;
    
    const codeContainer = button.closest('.code-container');
    if (!codeContainer) return;
    
    const codeElement = codeContainer.querySelector('pre code') || codeContainer.querySelector('pre');
    if (!codeElement) return;
    
    const codeToCopy = codeElement.textContent.trim();
    if (!codeToCopy) return;
    
    // Save original button state
    const originalHTML = button.innerHTML;
    const originalBg = button.style.background;
    const originalColor = button.style.color;
    
    try {
      // Try modern Clipboard API first
      await navigator.clipboard.writeText(codeToCopy);
      
      // Visual feedback
      button.innerHTML = '<i class="fas fa-check"></i> Copied!';
      button.style.background = 'var(--success)';
      button.style.color = 'var(--black)';
      
      // Reset after 2 seconds
      setTimeout(() => {
        button.innerHTML = originalHTML;
        button.style.background = originalBg;
        button.style.color = originalColor;
      }, 2000);
      
    } catch (err) {
      // Fallback for older browsers
      try {
        const textarea = document.createElement('textarea');
        textarea.value = codeToCopy;
        textarea.style.position = 'fixed';
        textarea.style.opacity = '0';
        document.body.appendChild(textarea);
        textarea.select();
        
        const successful = document.execCommand('copy');
        document.body.removeChild(textarea);
        
        if (successful) {
          button.innerHTML = '<i class="fas fa-check"></i> Copied!';
          button.style.background = 'var(--success)';
          setTimeout(() => {
            button.innerHTML = originalHTML;
            button.style.background = originalBg;
          }, 2000);
        } else {
          throw new Error('Fallback copy failed');
        }
      } catch (fallbackErr) {
        button.innerHTML = '<i class="fas fa-times"></i> Error';
        button.style.background = 'var(--error)';
        setTimeout(() => {
          button.innerHTML = originalHTML;
          button.style.background = originalBg;
        }, 2000);
      }
    }
  }

  // Tab System - Improved
  function openTab(tabId, event) {
    if (event) event.preventDefault();
    
    // Hide all tab contents
    document.querySelectorAll('.tab-content').forEach(tab => {
      tab.classList.remove('active');
    });
    
    // Deactivate all tab buttons
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    
    // Activate the selected tab
    const tab = document.getElementById(tabId);
    if (tab) tab.classList.add('active');
    
    if (event) {
      event.currentTarget.classList.add('active');
    } else {
      document.querySelector(`.tab-btn[onclick*="${tabId}"]`)?.classList.add('active');
    }
    
    // Recreate animations when switching tabs
    if (tabId === 'installation') {
      createBlockchainNodes();
    }
  }

  // Initialize with better performance
  document.addEventListener('DOMContentLoaded', () => {
    // Debounce the node creation for better performance
    let timeout;
    const resizeObserver = new ResizeObserver(() => {
      clearTimeout(timeout);
      timeout = setTimeout(createBlockchainNodes, 200);
    });
    resizeObserver.observe(document.body);
    
    createBlockchainNodes();
    
    // Add floating animation to chain logo
    const chainLogo = document.querySelector('.chain-logo');
    if (chainLogo) {
      chainLogo.style.animation = 'float 6s ease-in-out infinite alternate';
    }
    
    // Activate the default tab
    openTab('installation');
  });

  // Animation styles - Optimized
  const style = document.createElement('style');
  style.textContent = `
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(2deg); }
    }
    @keyframes pulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.8; }
    }
    .node {
      will-change: transform;
    }
    .connection {
      will-change: transform, opacity;
    }
  `;
  document.head.appendChild(style);
</script>
</body>
</html>
